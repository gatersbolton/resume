<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>美团内部机器人问答</title>
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body class="page">
  <header>
    <h1>美团“大象”内部机器人怎么讲</h1>
    <a class="back-link" href="index.html">返回主页</a>
  </header>

  <div class="card">
    <h2>我如何概括这段经历</h2>
    <p>
      在医疗健康业务部担任 Java 后端，负责“大象”内部通讯工具的专属聊天机器人。
      机器人面向内部技术同学，提供接口 / API 参数查询、使用说明检索、错误原因归纳，并集成日程提醒与值班推送。
      通过统一的大模型调用 SDK、检索增强与权限治理，让跨部门对接更顺畅，缺陷流转更快。
    </p>
  </div>

  <div class="card">
    <h2>内部机器人设计与实现</h2>
    <ul class="qa-list">
      <li><strong>入口与协议：</strong>在“大象”IM 中接入 Slash 指令 + 会话菜单，Java 网关鉴权后路由到机器人服务，支持同步问答与流式补全。</li>
      <li><strong>大模型调用：</strong>封装统一 SDK，切换不同大模型供应商；对提示词做模板化，插入接口文档摘要、参数示例和上下文对话。</li>
      <li><strong>检索增强：</strong>用向量检索聚合 API 文档、错误手册和内部 FAQ，命中后拼装“结论 + 引用片段”回答，避免模型胡诌。</li>
      <li><strong>场景插件：</strong>提供“接口参数表”“调用示例”“常见报错解释”插件，机器人根据意图选择插件并返回结构化卡片。</li>
      <li><strong>提醒与分派：</strong>对接日历与值班排班，按团队/人群推送会议提醒和上线窗口；结合历史 Bug 数据匹配负责团队并@对应同学。</li>
    </ul>
  </div>

  <div class="card">
    <h2>面试官可能追问的 10 个问题（聚焦内部机器人）</h2>
    <ol class="qa-list">
      <li>
        <strong>Q1：为什么要做这个机器人？</strong>
        A：跨部门沟通常卡在“找接口负责人、找参数说明”，平均沟通成本高；机器人把文档和经验集中到对话入口，缩短查询和对接时间，同时用提醒和分派降低遗忘和扯皮。
      </li>
      <li>
        <strong>Q2：整体架构怎么设计？</strong>
        A：IM 指令 → 网关鉴权限流 → 机器人服务（意图分类、检索、模型调用、插件渲染） → 大模型/检索服务 → 卡片回复；关键路径全链路埋点，慢调用落日志与链路追踪。
      </li>
      <li>
        <strong>Q3：如何让回答可信、不胡诌？</strong>
        A：所有回答都走 RAG：先向量检索接口文档和 FAQ，再用提示词要求“引用出处”；若检索得分低则返回“未命中”并给出人工求助入口，避免模型瞎编。
      </li>
      <li>
        <strong>Q4：接口参数查询怎么实现？</strong>
        A：离线解析 OpenAPI/Markdown 文档生成结构化参数表，检索命中后由“参数卡片插件”渲染字段、必填、默认值和示例；附带 Curl 示例便于直接调用。
      </li>
      <li>
        <strong>Q5：权限和安全怎么做？</strong>
        A：网关按员工身份鉴权，结合接口分级控制可见文档；对敏感关键词做审计与脱敏，模型调用前后加 DLP 规则，超限问题直接拒答并记录审计日志。
      </li>
      <li>
        <strong>Q6：延迟和稳定性如何保证？</strong>
        A：热点 FAQ 走缓存和预生成回答，检索与模型调用并行；大模型超时则降级为“纯检索”模式；全链路有超时和熔断，IM 返回友好兜底文案。
      </li>
      <li>
        <strong>Q7：错误归纳是怎么做的？</strong>
        A：收集常见报错日志 + FAQ 训练分类器，先匹配错误码/关键词，再用模板生成“原因 + 解决步骤”卡片；模型只负责补充描述，避免自由发挥。
      </li>
      <li>
        <strong>Q8：日程提醒和值班推送如何接入？</strong>
        A：订阅日历和值班表事件，按团队/人群构建推送任务；机器人在关键节点（会前 10 分钟、上线前 1 小时）发送卡片，点击可查看责任人和 Runbook。
      </li>
      <li>
        <strong>Q9：如何用历史 Bug 匹配负责团队？</strong>
        A：把历史缺陷按模块/服务打标签，构建“模块 → 团队/值班人”映射；当用户提问带有接口或模块信息时，提取关键词匹配标签并自动@对应团队。
      </li>
      <li>
        <strong>Q10：模型不可用时怎么兜底？</strong>
        A：探活发现模型失败后切换到备用供应商；若全部失败则仅返回检索结果 + 人工协助入口，并记录告警；所有请求都有重试与幂等 ID，避免重复推送。
      </li>
    </ol>
  </div>
</body>
</html>
